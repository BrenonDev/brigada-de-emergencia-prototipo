<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Central de Emerg√™ncia Institucional</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --vermelho: #b00020;
  --vermelho-claro: #e53935;
  --cinza-escuro: #1f1f1f;
  --cinza: #2b2b2b;
  --branco: #ffffff;
}

*{
  box-sizing: border-box;
  font-family: Arial, Helvetica, sans-serif;
}

body{
  margin: 0;
  min-height: 100dvh;
  background: linear-gradient(180deg, #1a1a1a, #000000);
  display: flex;
  justify-content: center;
  align-items: center;
}

.container{
  width: 90%;
  max-width: 420px;
  background: var(--cinza);
  border-radius: 14px;
  padding: 25px 20px 30px;
  text-align: center;
  box-shadow: 0 0 25px rgba(255,0,0,0.2);
  border: 2px solid var(--vermelho);
}

.logo{
  font-size: 40px;
  margin-bottom: 5px;
}

h1{
  color: var(--branco);
  font-size: 1.6em;
  margin-bottom: 8px;
}

p{
  color: #cccccc;
  font-size: 0.95em;
  margin-bottom: 25px;
}

.btn{
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  width: 100%;
  padding: 16px;
  margin: 10px 0;
  border-radius: 10px;
  text-decoration: none;
  font-size: 1em;
  font-weight: bold;
  color: var(--branco);
  background: linear-gradient(135deg, var(--vermelho), var(--vermelho-claro));
  transition: transform 0.2s, box-shadow 0.2s, opacity 0.2s;
  box-shadow: 0 4px 10px rgba(0,0,0,0.5);
}

.btn:hover{
  transform: scale(1.03);
  box-shadow: 0 6px 15px rgba(255,0,0,0.6);
  opacity: 0.95;
}

.footer{
  margin-top: 20px;
  font-size: 0.75em;
  color: #aaaaaa;
}
</style>
</head>

<body>

<div class="container">
  <div class="logo">üö®</div>
  <h1>Bot√µes de Emerg√™ncia</h1>
  <p>Toque no bot√£o correspondente para acionar o servi√ßo desejado imediatamente.</p>

  <!-- 1 -->
  <a class="btn" href="tel:+5511999990001">
    üìû Seguran√ßa Interna
  </a>

  <!-- 2 -->
  <a class="btn" href="tel:+5511999990002">
    üè• Enfermaria / Primeiros Socorros
  </a>

  <!-- 3 -->
  <a class="btn" onclick="enviarAlertaWhatsApp('5515996287208')">
    üöí Corpo de Bombeiros
  </a>

  <!-- 4 -->
  <a class="btn" href="tel:190">
    üöì Pol√≠cia Militar (190)
  </a>

  <!-- 5 -->
  <a class="btn" href="tel:+5511999990002">
    ‚ö° Manuten√ß√£o Predial de Emerg√™ncia
  </a>

  <div class="footer">
    Sistema de resposta r√°pida institucional
  </div>
</div>
<script>
async function enviarAlertaWhatsApp(numero) {
  if (!navigator.geolocation) {
    alert("Geolocaliza√ß√£o n√£o √© suportada neste dispositivo.");
    return;
  }

  // Mensagem base
  let mensagemBase = "üö® PEDIDO DE AJUDA üö®\nPreciso de ajuda agora!\nMinha localiza√ß√£o √©:";

  // Mostra feedback ao usu√°rio
  alert("Vamos obter sua localiza√ß√£o com alta precis√£o. Ative o GPS se solicitado.");

  const options = {
    enableHighAccuracy: true, // for√ßa GPS
    timeout: 20000,           // at√© 20s tentando
    maximumAge: 0             // n√£o usa cache
  };

  navigator.geolocation.getCurrentPosition(
    position => {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;
      const accuracy = position.coords.accuracy; // em metros

      // Se a precis√£o for ruim (>100m), tenta de novo
      if (accuracy > 100) {
        alert("Localiza√ß√£o ainda imprecisa (" + Math.round(accuracy) + "m). Tentando novamente...");
        enviarAlertaWhatsApp(numero);
        return;
      }

      const mapsLink = `https://maps.google.com/?q=${lat},${lon}`;

      const mensagemFinal = `${mensagemBase}\n${mapsLink}\n\nPrecis√£o aproximada: ${Math.round(accuracy)} metros.`;

      const url = `https://wa.me/${numero}?text=${encodeURIComponent(mensagemFinal)}`;

      window.location.href = url;
    },
    error => {
      if (error.code === error.PERMISSION_DENIED) {
        alert("Voc√™ precisa permitir o acesso √† localiza√ß√£o para enviar o alerta.");
      } else {
        alert("Erro ao obter localiza√ß√£o. Verifique se o GPS est√° ativado.");
      }
    },
    options
  );
}
</script>
</body>
</html>
